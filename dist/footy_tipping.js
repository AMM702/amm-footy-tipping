(()=>{function w(e){let r=e.teams.home,t=e.teams.away,o=e.gameNumber,d=e.gameID,s=document.getElementById("tipping-submit-div"),l=document.getElementById("tipping-form"),n=document.createElement("div");n.id=`game-${e.gameID}`,n.classList.add("game-details-div");let i=document.createElement("input");i.type="hidden",i.name=`${d}`,i.value="none",i.id=`hidden_${d}`,n.appendChild(i);let a=document.createElement("div");a.style.display="flex",a.style.justifySelf="start";let c=document.createElement("label");c.className="gameTippingCursor",c.style.paddingLeft="5px",c.style.paddingTop="10px";let p=document.createElement("input");p.type="radio",p.name=`${d}`,p.value="home",p.id=`${r}_${o}`,p.style.marginTop="3px",c.setAttribute("for",`${r}_${o}`),c.textContent=r,a.appendChild(p),a.appendChild(c);let u=document.createElement("span");u.textContent=`Game ${o} @ ${e.ground} (${e.time} ${e.date})`,e.userTip===1?e.result===1?u.textContent+=" \u2705":e.result===2&&(u.textContent+=" \u274C"):e.userTip===2&&(e.result===2?u.textContent+=" \u2705":e.result===1&&(u.textContent+=" \u274C")),u.style.paddingTop="3px",u.style.justifySelf="center",u.style.fontWeight="bold";let y=document.createElement("div");y.style.display="flex",y.style.justifySelf="start",y.style.marginLeft="50px";let f=document.createElement("label");f.className="gameTippingCursor",f.style.paddingLeft="5px",f.style.paddingTop="10px";let m=document.createElement("input");m.type="radio",m.name=`${d}`,m.value="away",m.id=`${t}_${o}`,m.style.marginTop="3px",f.setAttribute("for",`${t}_${o}`),f.textContent=t,y.appendChild(m),y.appendChild(f),n.appendChild(a),n.appendChild(u),n.appendChild(y),s?l.insertBefore(n,s):l.appendChild(n),e.userTip===1?(p.checked=!0,p.previousChecked=!0,i.value=p.value):e.userTip===2&&(m.checked=!0,m.previousChecked=!0,i.value=m.value),e.isTippable||(p.disabled=!0,m.disabled=!0),[p,m].forEach(h=>{h.addEventListener("click",()=>{h.previousChecked?(h.checked=!1,h.previousChecked=!1,i.value="none"):(document.querySelectorAll(`input[name="${d}"]`).forEach(b=>b.previousChecked=!1),h.previousChecked=!0,i.value=h.value)})})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.createGameFormElements=w;function L(e){let r=document.getElementById("round-results-div"),t=document.createElement("table");t.classList.add("custom-table");let d=t.createTHead().insertRow(),s=document.createElement("th");s.textContent="Username",s.classList.add("custom-cell"),d.appendChild(s);let l=document.createElement("th");l.textContent="Score",l.classList.add("custom-cell"),d.appendChild(l),e.forEach(n=>{let i=t.insertRow(),a=i.insertCell();a.textContent=n.username,a.classList.add("custom-cell");let c=i.insertCell();c.textContent=n.score,c.classList.add("custom-cell")}),r.appendChild(t)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateLeagueTable=L;function v(e){let r=document.getElementById("tippingRoundListOptions"),t=document.getElementById("tippingRoundDisplayText"),o=document.getElementById("tipping-form"),d=document.getElementById("league-table-heading"),s=n=>n.toLowerCase().trim().replace(/[\s\W]+/g,"-");r.innerHTML="",e.forEach(n=>{let i=`Round ${n.round}`,a=document.createElement("a");a.href="#",a.className="w-dropdown-link username_display",a.textContent=i,a.id=`${s(i)}`,a.addEventListener("click",function(c){c.preventDefault(),C(n,o,t,d,i),g(n)}),r.appendChild(a)});let l=!1;for(let n=0;n<e.length;n++){let i=e[n];if(i.isRoundOn){let a=`Round ${i.round}`;C(i,o,t,d,a),g(i),l=!0;break}}l||(C(e[0],o,t,d,`Round ${e[0].round}`),g(e[0]))}function C(e,r,t,o,d){t.textContent=d,o.textContent=`League Table (${d})`;let s=Array.from(r.children);for(let l=0;l<s.length;l++){let n=s[l];n.id!=="tipping-submit-div"&&n.id!=="tipping-submit-button"&&n.remove()}E(),e.matches.forEach(l=>window.CustomLibrary.createGameFormElements(l))}function E(){let e=document.getElementById("tipping-form"),r=document.getElementById("tipping-submit-div"),t=document.createElement("div");t.classList.add("game-details-div"),t.style.marginTop="0px";let o=document.createElement("span");o.textContent="Home Team",o.classList.add("game-details-text-header"),o.style.justifySelf="start";let d=document.createElement("span");d.textContent="Game Details",d.classList.add("game-details-text-header"),d.style.justifySelf="center";let s=document.createElement("span");s.textContent="Away Team",s.classList.add("game-details-text-header"),s.style.justifySelf="start",s.style.marginLeft="50px",t.appendChild(o),t.appendChild(d),t.appendChild(s),e?e.insertBefore(t,r):e.appendChild(t)}function g(e){let r=document.getElementById("league-table-hidden-score-text"),t=document.getElementById("round-results-div"),o=e.scores;o.length!=0?(r.innerHTML="",t.innerHTML="",window.CustomLibrary.populateLeagueTable(o)):t!==""&&(t.innerHTML="")}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateTippingDropdownMenuOptions=v;function T(){let e=document.getElementById("tipping-form");e.addEventListener("submit",r=>{r.preventDefault();let t=new FormData(e);t.delete("cf-turnstile-response");let o=Object.fromEntries(t.entries());console.table(o)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.interceptTippingForm=T;window.CustomLibrary.interceptTippingForm();})();
