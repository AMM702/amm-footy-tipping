(()=>{function w(e){let s=e.teams.home,n=e.teams.away,t=e.gameNumber,o=e.gameID,d=document.getElementById("tipping-submit-div"),c=document.getElementById("tipping-form"),i=document.createElement("div");i.id=`game-${e.gameID}`,i.classList.add("game-details-div");let a=document.createElement("input");a.type="hidden",a.name=`${o}`,a.value="none",a.id=`hidden_${o}`,i.appendChild(a);let r=document.createElement("div");r.style.display="flex",r.style.justifySelf="start";let l=document.createElement("label");l.className="gameTippingCursor",l.style.paddingLeft="5px",l.style.paddingTop="10px";let p=document.createElement("input");p.type="radio",p.name=`${o}`,p.value="home",p.id=`${s}_${t}`,p.style.marginTop="3px",l.setAttribute("for",`${s}_${t}`),l.textContent=s,r.appendChild(p),r.appendChild(l);let u=document.createElement("span");u.textContent=`Game ${t} @ ${e.ground} (${e.time} ${e.date})`,e.userTip===1?e.result===1?u.textContent+=" \u2705":e.result===2&&(u.textContent+=" \u274C"):e.userTip===2&&(e.result===2?u.textContent+=" \u2705":e.result===1&&(u.textContent+=" \u274C")),u.style.paddingTop="3px",u.style.justifySelf="center",u.style.fontWeight="bold";let C=document.createElement("div");C.style.display="flex",C.style.justifySelf="start",C.style.marginLeft="50px";let y=document.createElement("label");y.className="gameTippingCursor",y.style.paddingLeft="5px",y.style.paddingTop="10px";let m=document.createElement("input");m.type="radio",m.name=`${o}`,m.value="away",m.id=`${n}_${t}`,m.style.marginTop="3px",y.setAttribute("for",`${n}_${t}`),y.textContent=n,C.appendChild(m),C.appendChild(y),i.appendChild(r),i.appendChild(u),i.appendChild(C),d?c.insertBefore(i,d):c.appendChild(i),e.userTip===1?(p.checked=!0,p.previousChecked=!0,a.value=p.value):e.userTip===2&&(m.checked=!0,m.previousChecked=!0,a.value=m.value),e.isTippable||(p.disabled=!0,m.disabled=!0),[p,m].forEach(f=>{f.addEventListener("click",()=>{f.previousChecked?(f.checked=!1,f.previousChecked=!1,a.value="none"):(document.querySelectorAll(`input[name="${o}"]`).forEach(h=>h.previousChecked=!1),f.previousChecked=!0,a.value=f.value)})})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.createGameFormElements=w;function g(e){let s=document.getElementById("round-results-div"),n=document.createElement("table");n.classList.add("custom-table");let o=n.createTHead().insertRow(),d=document.createElement("th");d.textContent="Username",d.classList.add("custom-cell"),o.appendChild(d);let c=document.createElement("th");c.textContent="Score",c.classList.add("custom-cell"),o.appendChild(c),e.forEach(i=>{let a=n.insertRow(),r=a.insertCell();r.textContent=i.username,r.classList.add("custom-cell");let l=a.insertCell();l.textContent=i.score,l.classList.add("custom-cell")}),s.appendChild(n)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateLeagueTable=g;function x(e){if(!e)throw Error("Game data was not defined.");let s=document.getElementById("tippingRoundListOptions"),n=document.getElementById("tippingRoundDisplayText"),t=document.getElementById("tipping-form"),o=document.getElementById("league-table-heading"),d=i=>i.toLowerCase().trim().replace(/[\s\W]+/g,"-");s.innerHTML="",e.forEach(i=>{let a=`Round ${i.round}`,r=document.createElement("a");r.href="#",r.className="w-dropdown-link username_display",r.textContent=a,r.id=`${d(a)}`,r.addEventListener("click",function(l){l.preventDefault(),b(i,t,n,o,a),L(i)}),s.appendChild(r)});let c=!1;for(let i=0;i<e.length;i++){let a=e[i];if(a.isRoundOn){let r=`Round ${a.round}`;b(a,t,n,o,r),L(a),c=!0;break}}c||(b(e[0],t,n,o,`Round ${e[0].round}`),L(e[0]))}function b(e,s,n,t,o){n.textContent=o,t.textContent=`League Table (${o})`;let d=Array.from(s.children);for(let c=0;c<d.length;c++){let i=d[c];i.id!=="tipping-submit-div"&&i.id!=="tipping-submit-button"&&i.remove()}E(),e.matches.forEach(c=>window.CustomLibrary.createGameFormElements(c))}function E(){let e=document.getElementById("tipping-form"),s=document.getElementById("tipping-submit-div"),n=document.createElement("div");n.classList.add("game-details-div"),n.style.marginTop="0px";let t=document.createElement("span");t.textContent="Home Team",t.classList.add("game-details-text-header"),t.style.justifySelf="start";let o=document.createElement("span");o.textContent="Game Details",o.classList.add("game-details-text-header"),o.style.justifySelf="center";let d=document.createElement("span");d.textContent="Away Team",d.classList.add("game-details-text-header"),d.style.justifySelf="start",d.style.marginLeft="50px",n.appendChild(t),n.appendChild(o),n.appendChild(d),e?e.insertBefore(n,s):e.appendChild(n)}function L(e){let s=document.getElementById("league-table-hidden-score-text"),n=document.getElementById("round-results-div"),t=e.scores;t.length!=0?(s.innerHTML="",n.innerHTML="",window.CustomLibrary.populateLeagueTable(t)):n!==""&&(n.innerHTML="")}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateTippingDropdownMenuOptions=x;function v(){let e=document.getElementById("tipping-form");e.addEventListener("submit",s=>{s.preventDefault();let n=new FormData(e);n.delete("cf-turnstile-response");let t=Object.fromEntries(n.entries());console.table(t)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.interceptTippingForm=v;function T(e){let s=document.getElementById("state-buttons"),n=document.getElementById("comp-select-div");s.innerHTML="";let t=Object.keys(e);console.log(e),console.log(t),t.length>1?t.forEach(o=>{let d=o.toUpperCase();k(e[o],d,s)}):n.innerHTML="",window.CustomLibrary.populateTippingDropdownMenuOptions(e[t[0]])}function k(e,s,n){let t=document.getElementById("tippingGameName");if(!e)return;let o=document.createElement("button");switch(o.textContent=s,o.classList.add("state-button"),s){case"QLD":o.classList.add("qld-button"),t.textContent="NRL - QLD Comp";break;case"NSW":o.classList.add("nsw-button"),t.textContent="NRL - NSW Comp";break;case"VIC":o.classList.add("vic-button"),t.textContent="AFL - VIC Comp";break;case"WA":o.classList.add("wa-button"),t.textContent="AFL - WA Comp";break;default:o.classList.add("unknown-state");break}o.addEventListener("click",()=>{switch(window.CustomLibrary.populateTippingDropdownMenuOptions(e),s){case"QLD":t.textContent="NRL - QLD Comp";break;case"NSW":t.textContent="NRL - NSW Comp";break;case"VIC":t.textContent="AFL - VIC Comp";break;case"WA":t.textContent="AFL - WA Comp";break;default:break}}),n.appendChild(o)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.createGameTypeButtons=T;window.CustomLibrary.interceptTippingForm();})();
