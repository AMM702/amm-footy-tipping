(()=>{function g(e){let s=e.teams.home,o=e.teams.away,n=e.gameNumber,t=e.gameID,i=document.getElementById("tipping-submit-div"),l=document.getElementById("tipping-form"),r=document.createElement("div");r.id=`game-${e.gameID}`,r.classList.add("game-details-div");let a=document.createElement("input");a.type="hidden",a.name=`${t}`,a.value="none",a.id=`hidden_${t}`,r.appendChild(a);let d=document.createElement("div");d.style.display="flex",d.style.justifySelf="start";let c=document.createElement("label");c.className="gameTippingCursor",c.style.paddingLeft="5px",c.style.paddingTop="10px";let p=document.createElement("input");p.type="radio",p.name=`${t}`,p.value="home",p.id=`${s}_${n}`,p.style.marginTop="3px",c.setAttribute("for",`${s}_${n}`),c.textContent=s,d.appendChild(p),d.appendChild(c);let u=document.createElement("span");u.textContent=`Game ${n} @ ${e.ground} (${e.time} ${e.date})`,e.userTip===1?e.result===1?u.textContent+=" \u2705":e.result===2&&(u.textContent+=" \u274C"):e.userTip===2&&(e.result===2?u.textContent+=" \u2705":e.result===1&&(u.textContent+=" \u274C")),u.style.paddingTop="3px",u.style.justifySelf="center",u.style.fontWeight="bold";let y=document.createElement("div");y.style.display="flex",y.style.justifySelf="start",y.style.marginLeft="50px";let C=document.createElement("label");C.className="gameTippingCursor",C.style.paddingLeft="5px",C.style.paddingTop="10px";let m=document.createElement("input");m.type="radio",m.name=`${t}`,m.value="away",m.id=`${o}_${n}`,m.style.marginTop="3px",C.setAttribute("for",`${o}_${n}`),C.textContent=o,y.appendChild(m),y.appendChild(C),r.appendChild(d),r.appendChild(u),r.appendChild(y),i?l.insertBefore(r,i):l.appendChild(r),e.userTip===1?(p.checked=!0,p.previousChecked=!0,a.value=p.value):e.userTip===2&&(m.checked=!0,m.previousChecked=!0,a.value=m.value),e.isTippable||(p.disabled=!0,m.disabled=!0),[p,m].forEach(f=>{f.addEventListener("click",()=>{f.previousChecked?(f.checked=!1,f.previousChecked=!1,a.value="none"):(document.querySelectorAll(`input[name="${t}"]`).forEach(w=>w.previousChecked=!1),f.previousChecked=!0,a.value=f.value)})})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.createGameFormElements=g;function L(e){let s=document.getElementById("round-results-div"),o=document.createElement("table");o.classList.add("custom-table");let t=o.createTHead().insertRow(),i=document.createElement("th");i.textContent="Username",i.classList.add("custom-cell"),t.appendChild(i);let l=document.createElement("th");l.textContent="Score",l.classList.add("custom-cell"),t.appendChild(l),e.forEach(r=>{let a=o.insertRow(),d=a.insertCell();d.textContent=r.username,d.classList.add("custom-cell");let c=a.insertCell();c.textContent=r.score,c.classList.add("custom-cell")}),s.appendChild(o)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateLeagueTable=L;function v(e,s){if(!e)throw Error("Game data was not defined.");let o=document.getElementById("tippingRoundListOptions"),n=document.getElementById("tippingRoundDisplayText"),t=document.getElementById("tipping-form"),i=document.getElementById("league-table-heading"),l=a=>a.toLowerCase().trim().replace(/[\s\W]+/g,"-");o.innerHTML="",e.forEach(a=>{let d=`Round ${a.round}`,c=document.createElement("a");c.href="#",c.className="w-dropdown-link username_display",c.textContent=d,c.id=`${l(d)}`,c.addEventListener("click",function(p){p.preventDefault(),b(a,t,n,i,d,s),h(a)}),o.appendChild(c)});let r=!1;for(let a=0;a<e.length;a++){let d=e[a];if(d.isRoundOn){let c=`Round ${d.round}`;b(d,t,n,i,c,s),h(d),r=!0;break}}r||(b(e[0],t,n,i,`Round ${e[0].round}`,s),h(e[0]))}function b(e,s,o,n,t,i){o.textContent=t,n.textContent=`League Table (${t})`;let l=Array.from(s.children);for(let a=0;a<l.length;a++){let d=l[a];d.id!=="tipping-submit-div"&&d.id!=="tipping-submit-button"&&d.remove()}E(),e.matches.forEach(a=>window.CustomLibrary.createGameFormElements(a));let r=document.createElement("input");r.type="hidden",r.name="comp",r.value=i,s.appendChild(r)}function E(){let e=document.getElementById("tipping-form"),s=document.getElementById("tipping-submit-div"),o=document.createElement("div");o.classList.add("game-details-div"),o.style.marginTop="0px";let n=document.createElement("span");n.textContent="Home Team",n.classList.add("game-details-text-header"),n.style.justifySelf="start";let t=document.createElement("span");t.textContent="Game Details",t.classList.add("game-details-text-header"),t.style.justifySelf="center";let i=document.createElement("span");i.textContent="Away Team",i.classList.add("game-details-text-header"),i.style.justifySelf="start",i.style.marginLeft="50px",o.appendChild(n),o.appendChild(t),o.appendChild(i),e?e.insertBefore(o,s):e.appendChild(o)}function h(e){let s=document.getElementById("league-table-hidden-score-text"),o=document.getElementById("round-results-div"),n=e.scores;n.length!=0?(s.innerHTML="",o.innerHTML="",window.CustomLibrary.populateLeagueTable(n)):o!==""&&(o.innerHTML="")}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateTippingDropdownMenuOptions=v;function x(){let e=document.getElementById("tipping-form");e.addEventListener("submit",s=>{s.preventDefault();let o=new FormData(e);o.delete("cf-turnstile-response");let n=Object.fromEntries(o.entries()),t={comp:n.comp,games:{}};for(let i in n){if(!n.hasOwnProperty(i))continue;let l=n[i];i!="comp"&&(t.games[i]=l)}console.table(n),console.log(n),console.log(t)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.interceptTippingForm=x;function T(e){let s=document.getElementById("state-buttons"),o=document.getElementById("comp-select-div"),n=document.getElementById("tippingGameName");s.innerHTML="";let t=Object.keys(e);switch(t.length>1?t.forEach(i=>{let l=i.toUpperCase();k(e[i],l,s)}):o.style.display="none",window.CustomLibrary.populateTippingDropdownMenuOptions(e[t[0]],t[0]),t[0]){case"qld":case"nsw":let i=t[0].toUpperCase();n.textContent=`NRL - ${i} Comp`;break;case"vic":case"wa":let l=t[0].toUpperCase();n.textContent=`NRL - ${l} Comp`;break;default:break}}function k(e,s,o){let n=document.getElementById("tippingGameName");if(!e)return;let t=document.createElement("button");switch(t.textContent=s,t.classList.add("state-button"),s){case"QLD":t.classList.add("qld-button");break;case"NSW":t.classList.add("nsw-button");break;case"VIC":t.classList.add("vic-button");break;case"WA":t.classList.add("wa-button");break;default:t.classList.add("unknown-state");break}t.addEventListener("click",()=>{switch(window.CustomLibrary.populateTippingDropdownMenuOptions(e,s.toLowerCase()),s){case"QLD":n.textContent="NRL - QLD Comp";break;case"NSW":n.textContent="NRL - NSW Comp";break;case"VIC":n.textContent="AFL - VIC Comp";break;case"WA":n.textContent="AFL - WA Comp";break;default:break}}),o.appendChild(t)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.createGameTypeButtons=T;window.CustomLibrary.interceptTippingForm();})();
