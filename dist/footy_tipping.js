(()=>{function g(e){let i=e.teams.home,t=e.teams.away,n=e.gameNumber,s=e.gameID,d=document.getElementById("tipping-submit-div"),l=document.getElementById("tipping-form"),o=document.createElement("div");o.id=`game-${e.gameID}`,o.classList.add("game-details-div");let a=document.createElement("input");a.type="hidden",a.name=`${s}`,a.value="none",a.id=`hidden_${s}`,o.appendChild(a);let r=document.createElement("div");r.style.display="flex",r.style.justifySelf="start";let c=document.createElement("label");c.className="gameTippingCursor",c.style.paddingLeft="5px",c.style.paddingTop="10px";let p=document.createElement("input");p.type="radio",p.name=`${s}`,p.value="home",p.id=`${i}_${n}`,p.style.marginTop="3px",c.setAttribute("for",`${i}_${n}`),c.textContent=i,r.appendChild(p),r.appendChild(c);let m=document.createElement("span");m.textContent=`Game ${n} @ ${e.ground} (${e.time} ${e.date})`,e.userTip===1?e.result===1?m.textContent+=" \u2705":e.result===2&&(m.textContent+=" \u274C"):e.userTip===2&&(e.result===2?m.textContent+=" \u2705":e.result===1&&(m.textContent+=" \u274C")),m.style.paddingTop="3px",m.style.justifySelf="center",m.style.fontWeight="bold";let y=document.createElement("div");y.style.display="flex",y.style.justifySelf="start",y.style.marginLeft="50px";let f=document.createElement("label");f.className="gameTippingCursor",f.style.paddingLeft="5px",f.style.paddingTop="10px";let u=document.createElement("input");u.type="radio",u.name=`${s}`,u.value="away",u.id=`${t}_${n}`,u.style.marginTop="3px",f.setAttribute("for",`${t}_${n}`),f.textContent=t,y.appendChild(u),y.appendChild(f),o.appendChild(r),o.appendChild(m),o.appendChild(y),d?l.insertBefore(o,d):l.appendChild(o),e.userTip===1?(p.checked=!0,p.previousChecked=!0,a.value=p.value):e.userTip===2&&(u.checked=!0,u.previousChecked=!0,a.value=u.value),e.isTippable||(p.disabled=!0,u.disabled=!0),[p,u].forEach(b=>{b.addEventListener("click",()=>{b.previousChecked?(b.checked=!1,b.previousChecked=!1,a.value="none"):(document.querySelectorAll(`input[name="${s}"]`).forEach(w=>w.previousChecked=!1),b.previousChecked=!0,a.value=b.value)})})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.createGameFormElements=g;function L(e){let i=document.getElementById("round-results-div"),t=document.createElement("table");t.classList.add("custom-table");let s=t.createTHead().insertRow(),d=document.createElement("th");d.textContent="Username",d.classList.add("custom-cell"),s.appendChild(d);let l=document.createElement("th");l.textContent="Score",l.classList.add("custom-cell"),s.appendChild(l),e.forEach(o=>{let a=t.insertRow(),r=a.insertCell();r.textContent=o.username,r.classList.add("custom-cell");let c=a.insertCell();c.textContent=o.score,c.classList.add("custom-cell")}),i.appendChild(t)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateLeagueTable=L;function v(e){if(!e)throw Error("Game data was not defined.");let i=document.getElementById("tippingRoundListOptions"),t=document.getElementById("tippingRoundDisplayText"),n=document.getElementById("tipping-form"),s=document.getElementById("league-table-heading"),d=o=>o.toLowerCase().trim().replace(/[\s\W]+/g,"-");i.innerHTML="",e.forEach(o=>{let a=`Round ${o.round}`,r=document.createElement("a");r.href="#",r.className="w-dropdown-link username_display",r.textContent=a,r.id=`${d(a)}`,r.addEventListener("click",function(c){c.preventDefault(),C(o,n,t,s,a),h(o)}),i.appendChild(r)});let l=!1;for(let o=0;o<e.length;o++){let a=e[o];if(a.isRoundOn){let r=`Round ${a.round}`;C(a,n,t,s,r),h(a),l=!0;break}}l||(C(e[0],n,t,s,`Round ${e[0].round}`),h(e[0]))}function C(e,i,t,n,s){t.textContent=s,n.textContent=`League Table (${s})`;let d=Array.from(i.children);for(let l=0;l<d.length;l++){let o=d[l];o.id!=="tipping-submit-div"&&o.id!=="tipping-submit-button"&&o.remove()}E(),e.matches.forEach(l=>window.CustomLibrary.createGameFormElements(l))}function E(){let e=document.getElementById("tipping-form"),i=document.getElementById("tipping-submit-div"),t=document.createElement("div");t.classList.add("game-details-div"),t.style.marginTop="0px";let n=document.createElement("span");n.textContent="Home Team",n.classList.add("game-details-text-header"),n.style.justifySelf="start";let s=document.createElement("span");s.textContent="Game Details",s.classList.add("game-details-text-header"),s.style.justifySelf="center";let d=document.createElement("span");d.textContent="Away Team",d.classList.add("game-details-text-header"),d.style.justifySelf="start",d.style.marginLeft="50px",t.appendChild(n),t.appendChild(s),t.appendChild(d),e?e.insertBefore(t,i):e.appendChild(t)}function h(e){let i=document.getElementById("league-table-hidden-score-text"),t=document.getElementById("round-results-div"),n=e.scores;n.length!=0?(i.innerHTML="",t.innerHTML="",window.CustomLibrary.populateLeagueTable(n)):t!==""&&(t.innerHTML="")}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateTippingDropdownMenuOptions=v;function T(){let e=document.getElementById("tipping-form");e.addEventListener("submit",i=>{i.preventDefault();let t=new FormData(e);t.delete("cf-turnstile-response");let n=Object.fromEntries(t.entries());console.table(n)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.interceptTippingForm=T;function x(e){let i=document.getElementById("comp-select-div");i.innerHTML="";let t=Object.keys(e);console.log(e),console.log(t),t.forEach(n=>{let s=n.toUpperCase();$(e[n],s,i)}),window.CustomLibrary.populateTippingDropdownMenuOptions(e[t[0]])}function $(e,i,t){if(!e)return;let n=document.createElement("button");switch(n.textContent=i,n.classList.add("state-button"),i){case"QLD":n.classList.add("qld-button");break;case"NSW":n.classList.add("nsw-button");break;case"VIC":n.classList.add("vic-button");break;case"WA":n.classList.add("wa-button");break;default:n.classList.add("unknown-state");break}n.addEventListener("click",()=>{window.CustomLibrary.populateTippingDropdownMenuOptions(e)}),t.appendChild(n)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.createGameTypeButtons=x;window.CustomLibrary.interceptTippingForm();})();
