(()=>{function w(t){var e=document.getElementById("edit-password-modal"),n=document.getElementById("edit-password-close");t.onclick=function(){var r=this.getAttribute("data-value");document.getElementById("hiddenValue").value=r;var s=document.getElementById("edit-password-field");s.value="",e.style.display="block"},n.onclick=function(){e.style.display="none"},window.onclick=function(r){r.target===e&&(e.style.display="none")}}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayEditPasswordModal=w;function C(t){let e=document.getElementById("users-display-div");if(e.innerHTML="",t.length===0){let o=document.createElement("p");o.textContent="No data available",e.appendChild(o);return}let n=document.createElement("table");n.classList.add("custom-table");let r=["First Name","Surname","Email","Username","Actions"],d=n.createTHead().insertRow();r.forEach(o=>{let a=document.createElement("th");a.textContent=o,a.classList.add("custom-cell"),d.appendChild(a)}),t.forEach(o=>{let a=n.insertRow();Object.keys(o).forEach(m=>{if(m!=="userID"){let p=a.insertCell();p.textContent=o[m],p.classList.add("custom-cell")}});let c=a.insertCell();c.classList.add("custom-cell");let l=document.createElement("button");l.textContent="Edit Password",l.setAttribute("data-value",`${o.userID}`),l.classList.add("user-button"),w(l),c.appendChild(l);let i=document.createElement("button");i.textContent="Login as User",i.setAttribute("data-value",`${o.userID}`),i.classList.add("user-button"),D(i),c.appendChild(i);let u=document.createElement("button");u.textContent="Delete User",u.classList.add("user-button"),u.classList.add("delete-button"),R(u,o.userID,o.userName),c.appendChild(u)}),e.appendChild(n)}function D(t){t.addEventListener("click",function(){alert("Logging in as user")})}function I(t,e){confirm(`Are you sure you want to delete the user ${e}?`)&&alert("User deleted.")}function R(t,e,n){t.addEventListener("click",function(){I(e,n)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.adminDisplayUserDetails=C;function B(t,e){if(e=document.getElementById(e),t.rounds.length===0){let o=document.createElement("p");o.textContent="No data available",e.appendChild(o);return}let n=document.createElement("table");n.classList.add("custom-table");let r=["Round","Catch Up Game"],d=n.createTHead().insertRow();r.forEach(o=>{let a=document.createElement("th");a.textContent=o,a.classList.add("custom-cell"),d.appendChild(a)}),t.rounds.forEach(o=>{let a=T(o),c=n.insertRow(),l=c.insertCell();l.textContent=o.round,l.classList.add("custom-cell");let i=c.insertCell();i.appendChild(a),i.classList.add("custom-cell")}),e.appendChild(n)}function T(t){let e=document.createElement("select");e.name=`${t.round}`,e.required=!0;let n=document.createElement("option");return n.value="null",n.textContent="No catch up",e.appendChild(n),hasCatchUp=!1,t.matches.forEach(r=>{let s=document.createElement("option");s.value=r.gameID,s.textContent=`${r.homeTeam} vs ${r.awayTeam}`,r.gameID===t.catchUpGameID&&(s.selected=!0,hasCatchUp=!0),e.appendChild(s)}),hasCatchUp||(n.selected=!0),e}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayCatchUpRounds=B;function F(t){let e=document.getElementById("leaderboard-dropdown-options"),n=document.getElementById("leaderboard-dropdown-text"),r=["QLD","NSW","VIC","WA"];e.innerHTML="",r.forEach(s=>{let d=document.createElement("a");d.href="#",d.className="w-dropdown-link username_display",d.textContent=s,d.id=s;let o=t[s];d.addEventListener("click",function(a){a.preventDefault(),n.textContent=s,f(o)}),e.appendChild(d)}),f(t.QLD)}function f(t){let e=document.getElementById("leaderboard-table-div");if(e.innerHTML="",t.users.length===0){let a=document.createElement("p");a.textContent="No data available",e.appendChild(a);return}let n=document.createElement("table");n.classList.add("custom-table");let s=n.createTHead().insertRow(),d=document.createElement("th");d.textContent="Tipper",d.classList.add("score-cell"),s.appendChild(d);for(let a=0;a<t.totalRounds;a++){let c=document.createElement("th");c.textContent=`${a+1}`,c.classList.add("score-cell"),s.appendChild(c)}let o=document.createElement("th");o.textContent="Total Score",o.classList.add("score-cell"),s.appendChild(o),t.users.forEach(a=>{let c=n.insertRow(),l=c.insertCell();l.textContent=a.userName,l.classList.add("score-cell"),Object.keys(a.scores).forEach(u=>{let m=c.insertCell(),p=a.scores[u]===0?"-":a.scores[u];m.textContent=p,m.classList.add("score-cell")});let i=c.insertCell();i.textContent=a.total,i.classList.add("score-cell")}),e.appendChild(n)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateLeaderboardDropdownOptions=F;function U(t,e,n,r){let s=document.getElementById(e),d=document.getElementById(n),o=document.getElementById(r);t.rounds.forEach(c=>{let l=document.createElement("a");l.href="#",l.className="w-dropdown-link username_display",l.textContent=`Round ${c.round}`,l.addEventListener("click",function(i){i.preventDefault(),d.textContent=`Round ${c.round}`,s.innerHTML="",s.appendChild(E(c))}),o.appendChild(l)});let a=t.rounds[0];d.textContent=`Round ${a.round}`,s.innerHTML="",s.appendChild(E(a))}function E(t){let e=document.createElement("table");e.classList.add("custom-table");let n=["Date","Game","Winner"],s=e.createTHead().insertRow();return n.forEach(d=>{let o=document.createElement("th");o.textContent=d,o.classList.add("custom-cell"),s.appendChild(o)}),t.matches.forEach(d=>{let o=e.insertRow(),a=o.insertCell();a.textContent=d.date,a.classList.add("custom-cell");let c=o.insertCell();c.textContent=`${d.homeTeam} vs ${d.awayTeam}`,c.classList.add("custom-cell");let l=O(d),i=o.insertCell();i.appendChild(l),i.classList.add("custom-cell")}),e}function O(t){let e=document.createElement("select");e.name=`${t.gameID}`,e.required=!0;let n=document.createElement("option");n.value="null",n.textContent="No result",e.appendChild(n);let r=document.createElement("option");r.value=1,r.textContent=t.homeTeam,e.appendChild(r);let s=document.createElement("option");return s.value=2,s.textContent=t.awayTeam,e.appendChild(s),t.result===1?r.selected=!0:t.result===2?s.selected=!0:n.selected=!0,e}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateScoreDropdownMenu=U;function S(t){let e=document.getElementById("users-dropdown-options"),n=document.getElementById("users-dropdown-text"),r=["QLD","NSW","VIC","WA"];e.innerHTML="",r.forEach(s=>{let d=document.createElement("a");d.href="#",d.className="w-dropdown-link username_display",d.textContent=s,d.id=s;let o=t[s];d.addEventListener("click",function(a){a.preventDefault(),n.textContent=s,C(o)}),e.appendChild(d)}),C(t.QLD)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateUserDropdownOptions=S;function k(){let t=document.getElementById("email-users-form"),e=document.querySelector('input[name="Recipient"][value="All"]');e&&(e.checked=!0),t.addEventListener("submit",n=>{if(n.preventDefault(),!t.querySelector("input[name='Recipient']:checked")?.value){alert("Select a recipient");return}data=["user1@email.com","user2@email.com","user3@email.com"],bccList=data.join(",");let s=`mailto:?bcc=${bccList}`;window.open(s)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.sendTippingEmail=k;function h(){let t=document.getElementById("edit-password-form");t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let r=Object.fromEntries(n.entries());console.log(r)})}function b(){let t=document.getElementById("nrl-catchup-form-div"),e=document.getElementById("afl-catchup-form-div");L(t),L(e)}function L(t){t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let r=Object.fromEntries(n.entries());console.log(r)})}function v(){let t=document.getElementById("nrl-score-form-div"),e=document.getElementById("afl-score-form-div");y(t),y(e)}function y(t){t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let r=Object.fromEntries(n.entries());console.log(r)})}function x(){let t=document.getElementById("uploadGameDataForm");t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let r=Object.fromEntries(n.entries());console.log(r)})}function g(){h(),b(),v(),x()}g();})();
