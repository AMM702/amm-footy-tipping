(()=>{function h(t){let e=document.getElementById("users-display-div");if(e.innerHTML="",t.length===0){let s=document.createElement("p");s.textContent="No data available",e.appendChild(s);return}let n=document.createElement("table");n.classList.add("custom-table");let l=["First Name","Surname","Email","Username","Actions"],a=n.createTHead().insertRow();l.forEach(s=>{let d=document.createElement("th");d.textContent=s,d.classList.add("custom-cell"),a.appendChild(d)}),t.forEach(s=>{let d=n.insertRow();Object.keys(s).forEach(m=>{if(m!=="userID"){let p=d.insertCell();p.textContent=s[m],p.classList.add("custom-cell")}});let r=d.insertCell();r.classList.add("custom-cell");let c=document.createElement("button");c.textContent="Edit Password",c.setAttribute("data-value",`${s.userID}`),c.classList.add("user-button"),displayEditPasswordModal(c),r.appendChild(c);let i=document.createElement("button");i.textContent="Login as User",i.setAttribute("data-value",`${s.userID}`),i.classList.add("user-button"),y(i),r.appendChild(i);let u=document.createElement("button");u.textContent="Delete User",u.classList.add("user-button"),u.classList.add("delete-button"),L(u,s.userID,s.userName),r.appendChild(u)}),e.appendChild(n)}function y(t){t.addEventListener("click",function(){alert("Logging in as user")})}function E(t,e){confirm(`Are you sure you want to delete the user ${e}?`)&&alert("User deleted.")}function L(t,e,n){t.addEventListener("click",function(){E(e,n)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.adminDisplayUserDetails=h;function b(){var t=document.getElementById("new-user-modal"),e=document.getElementById("new-user-close"),n=document.getElementById("add-new-user-btn"),l=document.getElementById("new-user-form");n.onclick=function(){t.style.display="block"},e.onclick=function(){t.style.display="none"},window.onclick=function(o){o.target===t&&(t.style.display="none")}}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayAddUserModal=b;function f(t,e){if(e=document.getElementById(e),t.rounds.length===0){let s=document.createElement("p");s.textContent="No data available",e.appendChild(s);return}let n=document.createElement("table");n.classList.add("custom-table");let l=["Round","Catch Up Game"],a=n.createTHead().insertRow();l.forEach(s=>{let d=document.createElement("th");d.textContent=s,d.classList.add("custom-cell"),a.appendChild(d)}),t.rounds.forEach(s=>{let d=x(s),r=n.insertRow(),c=r.insertCell();c.textContent=s.round,c.classList.add("custom-cell");let i=r.insertCell();i.appendChild(d),i.classList.add("custom-cell")}),e.appendChild(n)}function x(t){let e=document.createElement("select");e.name=`${t.round}`,e.required=!0;let n=document.createElement("option");return n.value="null",n.textContent="No catch up",e.appendChild(n),hasCatchUp=!1,t.matches.forEach(l=>{let o=document.createElement("option");o.value=l.gameID,o.textContent=`${l.homeTeam} vs ${l.awayTeam}`,l.gameID===t.catchUpGameID&&(o.selected=!0,hasCatchUp=!0),e.appendChild(o)}),hasCatchUp||(n.selected=!0),e}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayCatchUpRounds=f;function v(t){var e=document.getElementById("edit-password-modal"),n=document.getElementById("edit-password-close");t.onclick=function(){var l=this.getAttribute("data-value");document.getElementById("hiddenValue").value=l;var o=document.getElementById("edit-password-field");o.value="",e.style.display="block"},n.onclick=function(){e.style.display="none"},window.onclick=function(l){l.target===e&&(e.style.display="none")}}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayEditPasswordModal=v;function g(t){let e=document.getElementById("leaderboard-dropdown-options"),n=document.getElementById("leaderboard-dropdown-text"),l=["QLD","NSW","VIC","WA"];e.innerHTML="",l.forEach(o=>{let a=document.createElement("a");a.href="#",a.className="w-dropdown-link username_display",a.textContent=o,a.id=o;let s=t[o];a.addEventListener("click",function(d){d.preventDefault(),n.textContent=o,w(s)}),e.appendChild(a)}),w(t.QLD)}function w(t){let e=document.getElementById("leaderboard-table-div");if(e.innerHTML="",t.users.length===0){let d=document.createElement("p");d.textContent="No data available",e.appendChild(d);return}let n=document.createElement("table");n.classList.add("custom-table");let o=n.createTHead().insertRow(),a=document.createElement("th");a.textContent="Tipper",a.classList.add("score-cell"),o.appendChild(a);for(let d=0;d<t.totalRounds;d++){let r=document.createElement("th");r.textContent=`${d+1}`,r.classList.add("score-cell"),o.appendChild(r)}let s=document.createElement("th");s.textContent="Total Score",s.classList.add("score-cell"),o.appendChild(s),t.users.forEach(d=>{let r=n.insertRow(),c=r.insertCell();c.textContent=d.userName,c.classList.add("score-cell"),Object.keys(d.scores).forEach(u=>{let m=r.insertCell(),p=d.scores[u]===0?"-":d.scores[u];m.textContent=p,m.classList.add("score-cell")});let i=r.insertCell();i.textContent=d.total,i.classList.add("score-cell")}),e.appendChild(n)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateLeaderboardDropdownOptions=g;function I(t,e,n,l){let o=document.getElementById(e),a=document.getElementById(n),s=document.getElementById(l);t.rounds.forEach(r=>{let c=document.createElement("a");c.href="#",c.className="w-dropdown-link username_display",c.textContent=`Round ${r.round}`,c.addEventListener("click",function(i){i.preventDefault(),a.textContent=`Round ${r.round}`,o.innerHTML="",o.appendChild(C(r))}),s.appendChild(c)});let d=t.rounds[0];a.textContent=`Round ${d.round}`,o.innerHTML="",o.appendChild(C(d))}function C(t){let e=document.createElement("table");e.classList.add("custom-table");let n=["Date","Game","Winner"],o=e.createTHead().insertRow();return n.forEach(a=>{let s=document.createElement("th");s.textContent=a,s.classList.add("custom-cell"),o.appendChild(s)}),t.matches.forEach(a=>{let s=e.insertRow(),d=s.insertCell();d.textContent=a.date,d.classList.add("custom-cell");let r=s.insertCell();r.textContent=`${a.homeTeam} vs ${a.awayTeam}`,r.classList.add("custom-cell");let c=D(a),i=s.insertCell();i.appendChild(c),i.classList.add("custom-cell")}),e}function D(t){let e=document.createElement("select");e.name=`${t.gameID}`,e.required=!0;let n=document.createElement("option");n.value="null",n.textContent="No result",e.appendChild(n);let l=document.createElement("option");l.value=1,l.textContent=t.homeTeam,e.appendChild(l);let o=document.createElement("option");return o.value=2,o.textContent=t.awayTeam,e.appendChild(o),t.result===1?l.selected=!0:t.result===2?o.selected=!0:n.selected=!0,e}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateScoreDropdownMenu=I;function B(t){let e=document.getElementById("users-dropdown-options"),n=document.getElementById("users-dropdown-text"),l=["QLD","NSW","VIC","WA"];e.innerHTML="",l.forEach(o=>{let a=document.createElement("a");a.href="#",a.className="w-dropdown-link username_display",a.textContent=o,a.id=o;let s=t[o];a.addEventListener("click",function(d){d.preventDefault(),n.textContent=o,adminDisplayUserDetails(s)}),e.appendChild(a)}),adminDisplayUserDetails(t.QLD)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateUserDropdownOptions=B;function R(){let t=document.getElementById("email-users-form-main"),e=document.querySelector('input[name="Recipient"][value="All"]');e&&(e.checked=!0),t.addEventListener("submit",n=>{if(n.preventDefault(),!t.querySelector("input[name='Recipient']:checked")?.ariaValueMax){alert("Select a recipient");return}data=["user1@email.com","user2@email.com","user3@email.com"],bccList=data.join(",");let o=`mailto:?bcc=${bccList}`;window.open(o)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.sendTippingEmail=R;})();
