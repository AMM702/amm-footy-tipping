(()=>{function C(t){var e=document.getElementById("edit-password-modal"),n=document.getElementById("edit-password-close");t.onclick=function(){var r=this.getAttribute("data-value");document.getElementById("hiddenValue").value=r;var o=document.getElementById("edit-password-field");o.value="",e.style.display="block"},n.onclick=function(){e.style.display="none"},window.onclick=function(r){r.target===e&&(e.style.display="none")}}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayEditPasswordModal=C;function w(t){let e=document.getElementById("users-display-div");if(e.innerHTML="",t.length===0){let s=document.createElement("p");s.textContent="No data available",e.appendChild(s);return}let n=document.createElement("table");n.classList.add("custom-table");let r=["First Name","Surname","Email","Username","Actions"],a=n.createTHead().insertRow();r.forEach(s=>{let d=document.createElement("th");d.textContent=s,d.classList.add("custom-cell"),a.appendChild(d)}),t.forEach(s=>{let d=n.insertRow();Object.keys(s).forEach(m=>{if(m!=="userID"){let p=d.insertCell();p.textContent=s[m],p.classList.add("custom-cell")}});let l=d.insertCell();l.classList.add("custom-cell");let c=document.createElement("button");c.textContent="Edit Password",c.setAttribute("data-value",`${s.userID}`),c.classList.add("user-button"),C(c),l.appendChild(c);let i=document.createElement("button");i.textContent="Login as User",i.setAttribute("data-value",`${s.userID}`),i.classList.add("user-button"),g(i),l.appendChild(i);let u=document.createElement("button");u.textContent="Delete User",u.classList.add("user-button"),u.classList.add("delete-button"),D(u,s.userID,s.userName),l.appendChild(u)}),e.appendChild(n)}function g(t){t.addEventListener("click",function(){alert("Logging in as user")})}function I(t,e){confirm(`Are you sure you want to delete the user ${e}?`)&&alert("User deleted.")}function D(t,e,n){t.addEventListener("click",function(){I(e,n)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.adminDisplayUserDetails=w;function B(){var t=document.getElementById("new-user-modal"),e=document.getElementById("new-user-close"),n=document.getElementById("add-new-user-btn"),r=document.getElementById("new-user-form");n.onclick=function(){t.style.display="block"},e.onclick=function(){t.style.display="none"},window.onclick=function(o){o.target===t&&(t.style.display="none")}}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayAddUserModal=B;function R(t,e){if(e=document.getElementById(e),t.rounds.length===0){let s=document.createElement("p");s.textContent="No data available",e.appendChild(s);return}let n=document.createElement("table");n.classList.add("custom-table");let r=["Round","Catch Up Game"],a=n.createTHead().insertRow();r.forEach(s=>{let d=document.createElement("th");d.textContent=s,d.classList.add("custom-cell"),a.appendChild(d)}),t.rounds.forEach(s=>{let d=T(s),l=n.insertRow(),c=l.insertCell();c.textContent=s.round,c.classList.add("custom-cell");let i=l.insertCell();i.appendChild(d),i.classList.add("custom-cell")}),e.appendChild(n)}function T(t){let e=document.createElement("select");e.name=`${t.round}`,e.required=!0;let n=document.createElement("option");return n.value="null",n.textContent="No catch up",e.appendChild(n),hasCatchUp=!1,t.matches.forEach(r=>{let o=document.createElement("option");o.value=r.gameID,o.textContent=`${r.homeTeam} vs ${r.awayTeam}`,r.gameID===t.catchUpGameID&&(o.selected=!0,hasCatchUp=!0),e.appendChild(o)}),hasCatchUp||(n.selected=!0),e}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayCatchUpRounds=R;function U(t){let e=document.getElementById("leaderboard-dropdown-options"),n=document.getElementById("leaderboard-dropdown-text"),r=["QLD","NSW","VIC","WA"];e.innerHTML="",r.forEach(o=>{let a=document.createElement("a");a.href="#",a.className="w-dropdown-link username_display",a.textContent=o,a.id=o;let s=t[o];a.addEventListener("click",function(d){d.preventDefault(),n.textContent=o,f(s)}),e.appendChild(a)}),f(t.QLD)}function f(t){let e=document.getElementById("leaderboard-table-div");if(e.innerHTML="",t.users.length===0){let d=document.createElement("p");d.textContent="No data available",e.appendChild(d);return}let n=document.createElement("table");n.classList.add("custom-table");let o=n.createTHead().insertRow(),a=document.createElement("th");a.textContent="Tipper",a.classList.add("score-cell"),o.appendChild(a);for(let d=0;d<t.totalRounds;d++){let l=document.createElement("th");l.textContent=`${d+1}`,l.classList.add("score-cell"),o.appendChild(l)}let s=document.createElement("th");s.textContent="Total Score",s.classList.add("score-cell"),o.appendChild(s),t.users.forEach(d=>{let l=n.insertRow(),c=l.insertCell();c.textContent=d.userName,c.classList.add("score-cell"),Object.keys(d.scores).forEach(u=>{let m=l.insertCell(),p=d.scores[u]===0?"-":d.scores[u];m.textContent=p,m.classList.add("score-cell")});let i=l.insertCell();i.textContent=d.total,i.classList.add("score-cell")}),e.appendChild(n)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateLeaderboardDropdownOptions=U;function k(t,e,n,r){let o=document.getElementById(e),a=document.getElementById(n),s=document.getElementById(r);t.rounds.forEach(l=>{let c=document.createElement("a");c.href="#",c.className="w-dropdown-link username_display",c.textContent=`Round ${l.round}`,c.addEventListener("click",function(i){i.preventDefault(),a.textContent=`Round ${l.round}`,o.innerHTML="",o.appendChild(E(l))}),s.appendChild(c)});let d=t.rounds[0];a.textContent=`Round ${d.round}`,o.innerHTML="",o.appendChild(E(d))}function E(t){let e=document.createElement("table");e.classList.add("custom-table");let n=["Date","Game","Winner"],o=e.createTHead().insertRow();return n.forEach(a=>{let s=document.createElement("th");s.textContent=a,s.classList.add("custom-cell"),o.appendChild(s)}),t.matches.forEach(a=>{let s=e.insertRow(),d=s.insertCell();d.textContent=a.date,d.classList.add("custom-cell");let l=s.insertCell();l.textContent=`${a.homeTeam} vs ${a.awayTeam}`,l.classList.add("custom-cell");let c=F(a),i=s.insertCell();i.appendChild(c),i.classList.add("custom-cell")}),e}function F(t){let e=document.createElement("select");e.name=`${t.gameID}`,e.required=!0;let n=document.createElement("option");n.value="null",n.textContent="No result",e.appendChild(n);let r=document.createElement("option");r.value=1,r.textContent=t.homeTeam,e.appendChild(r);let o=document.createElement("option");return o.value=2,o.textContent=t.awayTeam,e.appendChild(o),t.result===1?r.selected=!0:t.result===2?o.selected=!0:n.selected=!0,e}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateScoreDropdownMenu=k;function M(t){let e=document.getElementById("users-dropdown-options"),n=document.getElementById("users-dropdown-text"),r=["QLD","NSW","VIC","WA"];e.innerHTML="",r.forEach(o=>{let a=document.createElement("a");a.href="#",a.className="w-dropdown-link username_display",a.textContent=o,a.id=o;let s=t[o];a.addEventListener("click",function(d){d.preventDefault(),n.textContent=o,w(s)}),e.appendChild(a)}),w(t.QLD)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateUserDropdownOptions=M;function S(){let t=document.getElementById("email-users-form"),e=document.querySelector('input[name="Recipient"][value="All"]');e&&(e.checked=!0),t.addEventListener("submit",n=>{if(n.preventDefault(),!t.querySelector("input[name='Recipient']:checked")?.value){alert("Select a recipient");return}data=["user1@email.com","user2@email.com","user3@email.com"],bccList=data.join(",");let o=`mailto:?bcc=${bccList}`;window.open(o)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.sendTippingEmail=S;function h(){let t=document.getElementById("edit-password-form");t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let r=Object.fromEntries(n.entries());console.log(r)})}function L(){let t=document.getElementById("nrl-catchup-form-div"),e=document.getElementById("afl-catchup-form-div");y(t),y(e)}function y(t){t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let r=Object.fromEntries(n.entries());console.log(r)})}function v(){let t=document.getElementById("nrl-score-form-div"),e=document.getElementById("afl-score-form-div");b(t),b(e)}function b(t){t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let r=Object.fromEntries(n.entries());console.log(r)})}function x(){h(),L(),v()}x();})();
