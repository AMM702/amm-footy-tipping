(()=>{function f(t){var e=document.getElementById("edit-password-modal"),n=document.getElementById("edit-password-close");t.onclick=function(){var d=this.getAttribute("data-value");document.getElementById("hiddenValue").value=d;var o=document.getElementById("edit-password-field");o.value="",e.style.display="block"},n.onclick=function(){e.style.display="none"},window.onclick=function(d){d.target===e&&(e.style.display="none")}}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayEditPasswordModal=f;function w(t){let e=document.getElementById("users-display-div");if(e.innerHTML="",t.length===0){let s=document.createElement("p");s.textContent="No data available",e.appendChild(s);return}let n=document.createElement("table");n.classList.add("custom-table");let d=["First Name","Surname","Email","Username","Actions"],r=n.createTHead().insertRow();d.forEach(s=>{let a=document.createElement("th");a.textContent=s,a.classList.add("custom-cell"),r.appendChild(a)}),t.forEach(s=>{let a=n.insertRow();Object.keys(s).forEach(m=>{if(m!=="userID"){let p=a.insertCell();p.textContent=s[m],p.classList.add("custom-cell")}});let l=a.insertCell();l.classList.add("custom-cell");let c=document.createElement("button");c.textContent="Edit Password",c.setAttribute("data-value",`${s.userID}`),c.classList.add("user-button"),f(c),l.appendChild(c);let i=document.createElement("button");i.textContent="Login as User",i.setAttribute("data-value",`${s.userID}`),i.classList.add("user-button"),D(i),l.appendChild(i);let u=document.createElement("button");u.textContent="Delete User",u.classList.add("user-button"),u.classList.add("delete-button"),B(u,s.userID,s.userName),l.appendChild(u)}),e.appendChild(n)}function D(t){t.addEventListener("click",function(){alert("Logging in as user")})}function I(t,e){confirm(`Are you sure you want to delete the user ${e}?`)&&alert("User deleted.")}function B(t,e,n){t.addEventListener("click",function(){I(e,n)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.adminDisplayUserDetails=w;function R(){var t=document.getElementById("new-user-modal"),e=document.getElementById("new-user-close"),n=document.getElementById("add-new-user-btn"),d=document.getElementById("new-user-form");n.onclick=function(){t.style.display="block"},e.onclick=function(){t.style.display="none"},window.onclick=function(o){o.target===t&&(t.style.display="none")}}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayAddUserModal=R;function U(t,e){if(e=document.getElementById(e),t.rounds.length===0){let s=document.createElement("p");s.textContent="No data available",e.appendChild(s);return}let n=document.createElement("table");n.classList.add("custom-table");let d=["Round","Catch Up Game"],r=n.createTHead().insertRow();d.forEach(s=>{let a=document.createElement("th");a.textContent=s,a.classList.add("custom-cell"),r.appendChild(a)}),t.rounds.forEach(s=>{let a=T(s),l=n.insertRow(),c=l.insertCell();c.textContent=s.round,c.classList.add("custom-cell");let i=l.insertCell();i.appendChild(a),i.classList.add("custom-cell")}),e.appendChild(n)}function T(t){let e=document.createElement("select");e.name=`${t.round}`,e.required=!0;let n=document.createElement("option");return n.value="null",n.textContent="No catch up",e.appendChild(n),hasCatchUp=!1,t.matches.forEach(d=>{let o=document.createElement("option");o.value=d.gameID,o.textContent=`${d.homeTeam} vs ${d.awayTeam}`,d.gameID===t.catchUpGameID&&(o.selected=!0,hasCatchUp=!0),e.appendChild(o)}),hasCatchUp||(n.selected=!0),e}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.displayCatchUpRounds=U;function F(t){let e=document.getElementById("leaderboard-dropdown-options"),n=document.getElementById("leaderboard-dropdown-text"),d=["QLD","NSW","VIC","WA"];e.innerHTML="",d.forEach(o=>{let r=document.createElement("a");r.href="#",r.className="w-dropdown-link username_display",r.textContent=o,r.id=o;let s=t[o];r.addEventListener("click",function(a){a.preventDefault(),n.textContent=o,C(s)}),e.appendChild(r)}),C(t.QLD)}function C(t){let e=document.getElementById("leaderboard-table-div");if(e.innerHTML="",t.users.length===0){let a=document.createElement("p");a.textContent="No data available",e.appendChild(a);return}let n=document.createElement("table");n.classList.add("custom-table");let o=n.createTHead().insertRow(),r=document.createElement("th");r.textContent="Tipper",r.classList.add("score-cell"),o.appendChild(r);for(let a=0;a<t.totalRounds;a++){let l=document.createElement("th");l.textContent=`${a+1}`,l.classList.add("score-cell"),o.appendChild(l)}let s=document.createElement("th");s.textContent="Total Score",s.classList.add("score-cell"),o.appendChild(s),t.users.forEach(a=>{let l=n.insertRow(),c=l.insertCell();c.textContent=a.userName,c.classList.add("score-cell"),Object.keys(a.scores).forEach(u=>{let m=l.insertCell(),p=a.scores[u]===0?"-":a.scores[u];m.textContent=p,m.classList.add("score-cell")});let i=l.insertCell();i.textContent=a.total,i.classList.add("score-cell")}),e.appendChild(n)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateLeaderboardDropdownOptions=F;function k(t,e,n,d){let o=document.getElementById(e),r=document.getElementById(n),s=document.getElementById(d);t.rounds.forEach(l=>{let c=document.createElement("a");c.href="#",c.className="w-dropdown-link username_display",c.textContent=`Round ${l.round}`,c.addEventListener("click",function(i){i.preventDefault(),r.textContent=`Round ${l.round}`,o.innerHTML="",o.appendChild(E(l))}),s.appendChild(c)});let a=t.rounds[0];r.textContent=`Round ${a.round}`,o.innerHTML="",o.appendChild(E(a))}function E(t){let e=document.createElement("table");e.classList.add("custom-table");let n=["Date","Game","Winner"],o=e.createTHead().insertRow();return n.forEach(r=>{let s=document.createElement("th");s.textContent=r,s.classList.add("custom-cell"),o.appendChild(s)}),t.matches.forEach(r=>{let s=e.insertRow(),a=s.insertCell();a.textContent=r.date,a.classList.add("custom-cell");let l=s.insertCell();l.textContent=`${r.homeTeam} vs ${r.awayTeam}`,l.classList.add("custom-cell");let c=M(r),i=s.insertCell();i.appendChild(c),i.classList.add("custom-cell")}),e}function M(t){let e=document.createElement("select");e.name=`${t.gameID}`,e.required=!0;let n=document.createElement("option");n.value="null",n.textContent="No result",e.appendChild(n);let d=document.createElement("option");d.value=1,d.textContent=t.homeTeam,e.appendChild(d);let o=document.createElement("option");return o.value=2,o.textContent=t.awayTeam,e.appendChild(o),t.result===1?d.selected=!0:t.result===2?o.selected=!0:n.selected=!0,e}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateScoreDropdownMenu=k;function O(t){let e=document.getElementById("users-dropdown-options"),n=document.getElementById("users-dropdown-text"),d=["QLD","NSW","VIC","WA"];e.innerHTML="",d.forEach(o=>{let r=document.createElement("a");r.href="#",r.className="w-dropdown-link username_display",r.textContent=o,r.id=o;let s=t[o];r.addEventListener("click",function(a){a.preventDefault(),n.textContent=o,w(s)}),e.appendChild(r)}),w(t.QLD)}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.populateUserDropdownOptions=O;function S(){let t=document.getElementById("email-users-form"),e=document.querySelector('input[name="Recipient"][value="All"]');e&&(e.checked=!0),t.addEventListener("submit",n=>{if(n.preventDefault(),!t.querySelector("input[name='Recipient']:checked")?.value){alert("Select a recipient");return}data=["user1@email.com","user2@email.com","user3@email.com"],bccList=data.join(",");let o=`mailto:?bcc=${bccList}`;window.open(o)})}window.CustomLibrary=window.CustomLibrary||{};window.CustomLibrary.sendTippingEmail=S;function h(){let t=document.getElementById("edit-password-form");t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let d=Object.fromEntries(n.entries());console.log(d)})}function L(){let t=document.getElementById("nrl-catchup-form-div"),e=document.getElementById("afl-catchup-form-div");y(t),y(e)}function y(t){t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let d=Object.fromEntries(n.entries());console.log(d)})}function v(){let t=document.getElementById("nrl-score-form-div"),e=document.getElementById("afl-score-form-div");b(t),b(e)}function b(t){t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let d=Object.fromEntries(n.entries());console.log(d)})}function g(){let t=document.getElementById("uploadGameDataForm");t.addEventListener("submit",e=>{e.preventDefault();let n=new FormData(t);n.delete("cf-turnstile-response");let d=Object.fromEntries(n.entries());console.log(d)})}function x(){h(),L(),v(),g()}x();})();
